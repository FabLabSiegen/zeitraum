<html>
	<head>
		<script src="jquery-3.1.1.min.js"></script>
		<script>
			var map = {"0": "1_Start",
					   "1": "2_Herrengarten",
					   "2": "3_Martinikirche"};

			var oldIndex = '-1';
			var oldLang = 'xy';
			var loadVar = function() {
				//console.log("polling");
				$.getScript("currentSlide.js")
					.done(function() {
						//console.log("done");
						if (index != oldIndex || lang != oldLang) {
							//console.log("switching contents");

							var $downloadingImage = $("<img>");
							$downloadingImage.load(function(){
								$("#picture").html("<img id='img1' src='" + $(this).attr("src") + "' />");
							});
							$downloadingImage.attr("src", map[index] + "/beamer_" + lang + ".jpg");

							oldIndex = index;
							oldLang = lang;
						}
					})
					.fail(function() {
						console.log("fail");
				});
			};

			setInterval(loadVar, 500);
		</script>
		<style>
			#picture img {
				max-width: 100%;
			}
		</style>
	</head>

	<body>
		<div id="picture"></div>
	</body>
</html>
