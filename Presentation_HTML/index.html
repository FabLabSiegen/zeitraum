<html>
	<head>
		<link href="Lato/latofonts.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="style.css">
		<script src="jquery-3.1.1.min.js"></script>
		<script>
		var map = {"0": "1_Button1Start",
					 "1": "2_Herrengarten",
					 "2": "3_Martinikirche",
					 "3": "4_UnteresSchloss",
					 "4": "5_Kroenchencenter",
					 "5": "6_Button2HennerUndFrieder",
					 "6": "7_Button3WalterKraemer",
					 "7": "8_Marienkirche",
					 "8": "9_RathausMarkt",
					 "9": "10_Nikolaikirche",
					 "10": "11_Hochbunker",
					 "11": "12_HausDerKirche",
					 "12": "13_OberesSchloss",
					 "13": "14_Zeughaus",
					 "14": "15_Schlosspark",
					 "15": "16_Apollo",
					 "16": "17_HTS",
					 "17": "18_Bahnhof",
					 "18": "19_MuseumGegenwart",
					 "19": "20_Button5stadtmauer",
					 "20": "21_Button6Rubens",
					 "21": "22_Button7JohannSieben",
					 "22": "23_Button8Diesterweg",
					 "23": "24_StadtkrankenhausUni",
					 "24": "25_Button4Reformation"};

			var oldIndex = '-1';
			var oldLang = 'xy';
			var loadVar = function() {
				console.log("polling");
				$.getScript("currentSlide.js")
					.done(function() {
						console.log("done");
						if (index != oldIndex || lang != oldLang) {
							console.log("switching contents");
							if (tour === true) {
								$("#back").html("<img id='img2' src='" + map[index] + "/tour.jpg' />");
								
								$("#ebenezwei").hide();
								$("#qrpicture").hide();
								$("#ebenetext").hide();
								
							}
							else {
								$("#ebenezwei").show();
								$("#qrpicture").show();
								$("#ebenetext").show();

								
								$("#ebenetext").load(map[index] + "/content_" + lang + ".html");
								$("#picture").html("<img id='img1' src='" + map[index] + "/01.jpg' />");
								$("#back").html("<img id='img2' src='bg.jpg' />");
								$("#qrpicture").html("<img id='img3' src='" + map[index] + "/qr.jpg' />");
								
							}
							oldIndex = index;
							oldLang = lang;
						}
					})
					.fail(function() {
						console.log("fail");
				});
			};

			setInterval(loadVar, 500);
		</script>
		
	</head>

	<body>
		<div id="ebeneeins">
				<div id="back"></div>
		</div>
		<div id="ebenezwei">
				<div id="picture"></div>
		</div>
		<div id="qrpicture"></div>
		<div id="ebenetext"></div>



	</body>
</html>
